# Employee Directory Console App - Report

## Описание
Консольное приложение для работы со справочником сотрудников.  
Используется Python + PostgreSQL, объектно-ориентированный подход и запуск по режимам:

## Режимы работы
1. Создание таблицы  
2. Добавление одного сотрудника  
3. Вывод всех сотрудников (уникальные ФИО + дата рождения, сортировка)  
4. Генерация 1 000 000 сотрудников + 100 записей (Male + фамилия на F)  
5. Выборка по критерию (Male + last_name LIKE 'F%'), замер времени  
6. Оптимизация базы данных и повторный замер  

---

## Структура таблицы employees

- last_name  
- first_name  
- middle_name  
- birth_date  
- gender  

---

# Результаты производительности

## До оптимизации (режим 5)
- Найдено записей: 100  
- Время выполнения запроса: 58.22 ms

---

## После оптимизации (режим 6)

Был создан частичный индекс:

```sql
CREATE INDEX IF NOT EXISTS idx_employees_male_lastname_f
ON employees (last_name)
WHERE gender = 'Male';
```

И обновлена статистика:

```
ANALYZE employees
```
Почему этот способ:
- Отбрасывает большую часть данных, фильтруя запрос по полу и префиксу фамилии
- Обычный индекс по двум полям даёт слабый эффект из за своей общности
- Частичный индекс значительно сужает область, делает индекс маленьким и быстрым
- ANALYZE даёт планировщику актуальную картину данных, поэтому он действительно выбирает индекс, а не полное сканирование

# Результат:
- Надено записей: 100
- Время выполнения запроса: 43.46 ms

Итог
Оптимизация ускорила выполнение запроса на 25% благодря использованию частичного индекса и актуальной статистики таблицы
